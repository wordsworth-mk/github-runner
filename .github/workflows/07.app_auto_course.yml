name: 07. ðŸŸ¢ app_auto_course

on:
  workflow_dispatch:
    inputs:
      COURSE_URL:
        description: "è¯¾ç¨‹åœ°å€"
        required: true
        type: string

      LOGIN_TYPE:
        description: "ç™»å½•è´¦å·ç±»åž‹"
        type: choice
        required: true
        options:
          - "1"  # ç”¨æˆ·å
          - "3"  # é‚®ç®±
          - "4"  # èº«ä»½è¯

      LOGIN_NAME:
        description: "ç™»å½•è´¦å·"
        required: true
        type: string

      LOGIN_PWD:
        description: "ç™»å½•å¯†ç "
        required: true
        type: string

  # è¯¥äº‹ä»¶å¯ä»¥é€šè¿‡ API è§¦å‘
  repository_dispatch:
    types:
      - app_auto_course

jobs:
  run_app:
    uses: wordsworth-mk/github-runner/.github/workflows/21.run.yml@main
    with:
      APP: auto_course
      WITH_3PARTY: false
      ARGS: >-
        -u ${{ inputs.COURSE_URL || github.event.client_payload.COURSE_URL }}
        -t ${{ inputs.LOGIN_TYPE || github.event.client_payload.LOGIN_TYPE }}
        -a ${{ inputs.LOGIN_NAME || github.event.client_payload.LOGIN_NAME }}
        -p ${{ inputs.LOGIN_PWD || github.event.client_payload.LOGIN_PWD }}
      DEBUG: ${{ inputs.DEBUG || false }}

    secrets:
      MYPY_ACCESS_TOKEN: ${{ secrets.MYPY_ACCESS_TOKEN }}

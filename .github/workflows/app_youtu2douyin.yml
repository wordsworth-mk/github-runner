name: ğŸŸ¢ app_youtu2douyin

on:
  workflow_dispatch:
    inputs:
      ARGS:
        description: |+
          usage: main.py [-h] [-m {loop,once,manual}] [-t {channel,playlist}] [--publish] [--no-publish] [-f] [url]

          show example

          positional arguments:
            url                   è§†é¢‘åœ°å€

          options:
            -h, --help            show this help message and exit
            -m {loop,once,manual}, --mode {loop,once,manual}
                                  è¿è¡Œæ¨¡å¼, -m loop è¡¨ç¤ºæŒç»­ç›‘æ§; -m once è¡¨ç¤ºè¿è¡Œä¸€æ¬¡; -m manual è¡¨ç¤ºæ‰‹åŠ¨è§¦å‘
            -t {channel,playlist}, --type {channel,playlist}
                                  è§†é¢‘åˆé›†ç±»å‹(channel/playlist)
            --publish             æ˜¯å¦æ‰§è¡Œå‘å¸ƒæ“ä½œ
            --no-publish          ä¸æ‰§è¡Œå‘å¸ƒæ“ä½œ
            -f, --force           å¼ºåˆ¶å¤„ç†è¯¥è§†é¢‘ URL
        required: false
        type: string
        # å¦‚æœè¦ä¼ å…¥æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦ç”¨åŒå¼•å·æ‹¬èµ·æ¥è¾“å…¥ "-m once"
        # è¿™ç§æ–¹å¼å°±åƒç»ˆç«¯è¾“å…¥å‘½ä»¤ä¸€æ ·çš„
        default: "-m manual "

  # å®šæ—¶æ‰§è¡Œ
  schedule:
    # ä»£è¡¨å›½é™…æ ‡å‡†æ—¶é—´ï¼Œå®é™…åŒ—äº¬æ—¶é—´éœ€è¦ +8 å°æ—¶
    - cron: "30 13 * * *"

jobs:
  run:
    uses: wordsworth-mk/github-runner/.github/workflows/run.yml@main
    with:
      APP: youtu2douyin
      # å®šæ—¶æ‰§è¡Œæ²¡ä¼ è¿™ä¸ªå€¼ä¹Ÿå¯ä»¥ï¼Œåœ¨ run.yml å·²ç»åšäº†å¤„ç†äº†
      ARGS: ${{ inputs.ARGS }}
      DEPENDENT_BINARY: "ffmpeg"
    secrets:
      MYPY_ACCESS_TOKEN: ${{ secrets.MYPY_ACCESS_TOKEN }}

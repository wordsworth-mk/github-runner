name: 05. ðŸŸ¢ app_checkin

# è§¦å‘æ¡ä»¶ é€šå¸¸æ˜¯æŸäº›äº‹ä»¶ï¼Œä¾‹å¦‚ï¼šâ€‹â€‹releaseâ€‹â€‹â€‹ã€â€‹â€‹pushâ€‹â€‹â€‹ã€â€‹â€‹pull_requestâ€‹â€‹â€‹ç­‰
on:
  workflow_dispatch:
  # ä½¿ç”¨ cron å®šæ—¶æ‰§è¡Œ
  schedule:
    # ä»£è¡¨å›½é™…æ ‡å‡†æ—¶é—´ 21 ç‚¹ 30 åˆ†ï¼ŒåŒ—äº¬æ—¶é—´éœ€è¦ +8 å°æ—¶ï¼Œä»£è¡¨åŒ—äº¬æ—¶é—´ä¸Šåˆ 5 ç‚¹ 30 åˆ†ç‚¹è¿è¡Œ
    - cron: "30 21 * * *"

# workflow æ–‡ä»¶çš„ä¸»ä½“å†…å®¹ï¼Œè¡¨ç¤ºè¦æ‰§è¡Œçš„ä¸€é¡¹æˆ–å¤šé¡¹ä»»åŠ¡
jobs:
  # å®šä¹‰ä¸€ä¸ªä»»åŠ¡
  first_job:
    # åœ¨ä»€ä¹ˆçŽ¯å¢ƒè¿è¡Œä»»åŠ¡
    runs-on: ubuntu-latest
    steps:
      # ä½¿ç”¨åˆ«äººé¢„å…ˆè®¾ç½®å¥½çš„ Actionsï¼Œå¼•ç”¨ actions/checkout è¿™ä¸ª actionï¼Œä¸Žæ‰€åœ¨çš„githubä»“åº“åŒå
      - uses: actions/checkout@v4
        # è®¿é—®ä»“åº“ç”¨åˆ°çš„ Personal access token
        env:
          MYPY_ACCESS_TOKEN: ${{ secrets.MYPY_ACCESS_TOKEN || secrets.GITHUB_TOKEN }}
        with:
          token: ${{ env.MYPY_ACCESS_TOKEN }}
          repository: M-Kepler/Python

      # æ­¥éª¤çš„åç§°ï¼ˆgithub action æ˜¯ä¸€æ­¥ä¸€æ­¥æŒ‰é¡ºåºæ‰§è¡Œä¸‹åŽ»çš„ï¼‰
      - name: step1. setup python
        uses: actions/setup-python@v3
        # æŒ‡å®šæŸä¸ª action å¯èƒ½éœ€è¦è¾“å…¥çš„å‚æ•°
        with:
          python-version: "3.10"

      - name: step2. run
        run: |
          cd mypy/apps/checkin
          pip3 install -r requirements.txt > /dev/null 2>&1
          python3 main.py

name: ğŸš¥ ä»£ç è´¨é‡æ£€æŸ¥

on:
  workflow_call:
    inputs:
      APP_PATH:
        required: true
        type: string

jobs:
  # ä»£ç è´¨é‡
  python_code_quality_and_lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Flake8 check
        run: |
          pip install flake8 > /dev/null 2>&1
          flake8 --config .flake8 ${{ inputs.APP_PATH }}
          [ $? == 0 ] && echo "flake8 success"

      - name: Pylint check
        continue-on-error: true # å³ä½¿å¤±è´¥äº†ä¹Ÿç»§ç»­åç»­æµç¨‹
        run: |
          pip install pylint > /dev/null 2>&1
          # pylint å‘½ä»¤æ‰§è¡Œè¿”å›ç é 0 çš„è¯ï¼Œåé¢çš„å‘½ä»¤ä¸ä¼šè¢«æ‰§è¡Œçš„
          pylint --rcfile .pylintrc ${{ inputs.APP_PATH }} -r y || true
          # ä¸è®º pylint ç»“æœå¦‚ä½•ï¼Œå§‹ç»ˆæ˜¯ 0
          # pylint_ret=$?

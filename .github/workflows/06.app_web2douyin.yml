name: 06. ğŸŸ¢ app_web2douyin

on:
  workflow_dispatch:
    inputs:
      ARGS:
        description: ç½‘é¡µåœ°å€
        required: false
        type: string

      ENV_PUBLISH_ACCOUNT:
        type: choice
        description: "é€‰æ‹©è´¦å·"
        required: false
        default: "middle"
        options:
          - "large" # å¤§å·
          - "middle" # ä¸­å·
          - "test" # æµ‹è¯•è´¦å·

      # github action è¿˜ä¸æ”¯æŒå¤é€‰æ¡†
      ENV_PUBLISH_PLATFORMS:
        type: string
        description: "é€‰æ‹©å‘å¸ƒå¹³å°ï¼Œç”¨ ',' åˆ†å‰²ï¼ˆä¸å¸¦ç©ºæ ¼ï¼Œå¯é€‰é¡¹: douyin,weixin,xiaohongshuï¼‰"
        required: false
        default: "douyin"

      ENV_PUBLISH_MOD:
        type: choice
        description: "é€‰æ‹©å‘å¸ƒæ—¶é—´æ¨¡å¼"
        required: false
        default: "timing"
        options:
          - "now"
          - "timing"

jobs:
  run:
    uses: wordsworth-mk/github-runner/.github/workflows/21.run.yml@main
    with:
      # ç¯å¢ƒå˜é‡
      ENV_PUBLISH_MOD: ${{ github.event.inputs.ENV_PUBLISH_MOD }}
      ENV_PUBLISH_PLATFORMS: ${{ github.event.inputs.ENV_PUBLISH_PLATFORMS }}
      ENV_PUBLISH_ACCOUNT: ${{ github.event.inputs.ENV_PUBLISH_ACCOUNT }}

      APP: web2douyin
      # å®šæ—¶æ‰§è¡Œæ²¡ä¼ è¿™ä¸ªå€¼ä¹Ÿå¯ä»¥ï¼Œåœ¨ run.yml å·²ç»åšäº†å¤„ç†äº†
      ARGS: -u ${{ inputs.ARGS }}
      WITH_3PARTY: false
    secrets:
      MYPY_ACCESS_TOKEN: ${{ secrets.MYPY_ACCESS_TOKEN }}
